<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="还是挺重要的">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP函数记录">
<meta property="og:url" content="https://ttoc.fun/php-functions/index.html">
<meta property="og:site_name" content="Ttoc&#39;s blog">
<meta property="og:description" content="还是挺重要的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ttoc.fun/php-functions/image-20220811135742130.png">
<meta property="og:image" content="https://ttoc.fun/php-functions/image-20220811135813137.png">
<meta property="og:image" content="https://ttoc.fun/php-functions/image-20230908170938509.png">
<meta property="article:published_time" content="2023-02-13T13:51:57.927Z">
<meta property="article:modified_time" content="2023-09-08T09:09:39.575Z">
<meta property="article:author" content="Ttoc">
<meta property="article:tag" content="PHP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ttoc.fun/php-functions/image-20220811135742130.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>PHP函数记录</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 5.4.2"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css"></head>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css" />



<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="顶部" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <li><a href="/">首页</a></li>
          <li><a href="/archives/">文章</a></li>
        <li><a href="/search/">搜索</a></li>
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="上一篇" href="/Reverses-shell/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="下一篇" href="/Linux-PowerUp/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="返回顶部" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="分享文章" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://ttoc.fun/php-functions/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://ttoc.fun/php-functions/&text=PHP函数记录"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://ttoc.fun/php-functions/&title=PHP函数记录"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://ttoc.fun/php-functions/&is_video=false&description=PHP函数记录"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=PHP函数记录&body=Check out this article: https://ttoc.fun/php-functions/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://ttoc.fun/php-functions/&title=PHP函数记录"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://ttoc.fun/php-functions/&title=PHP函数记录"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://ttoc.fun/php-functions/&title=PHP函数记录"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://ttoc.fun/php-functions/&title=PHP函数记录"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://ttoc.fun/php-functions/&name=PHP函数记录&description=&lt;p&gt;&lt;code&gt;还是挺重要的&lt;/code&gt;&lt;/p&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://ttoc.fun/php-functions/&t=PHP函数记录"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PHP%E5%87%BD%E6%95%B0%E8%AE%B0%E5%BD%95"><span class="toc-number">1.</span> <span class="toc-text">PHP函数记录</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-php%E5%87%BD%E6%95%B0md5"><span class="toc-number">1.1.</span> <span class="toc-text">1)php函数md5</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-php%E5%87%BD%E6%95%B0ereg%EF%BC%8Cnull%E6%88%AA%E6%96%AD"><span class="toc-number">1.2.</span> <span class="toc-text">2)php函数ereg，null截断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-php%E5%87%BD%E6%95%B0sleep"><span class="toc-number">1.3.</span> <span class="toc-text">3)php函数sleep</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-php%E5%87%BD%E6%95%B0is-numeric"><span class="toc-number">1.4.</span> <span class="toc-text">4)php函数is_numeric()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-eval-%E5%87%BD%E6%95%B0%E5%92%8Csystem-%E5%87%BD%E6%95%B0%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">1.5.</span> <span class="toc-text">5)eval()函数和system()函数的比较</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-PHP%E3%81%AEmb%E7%B3%BB%E5%88%97%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">1.6.</span> <span class="toc-text">6)PHPのmb系列函数返回值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-preg-match-%E2%80%98-%E2%80%98"><span class="toc-number">1.7.</span> <span class="toc-text">7)preg_match(‘&#x2F;^$&#x2F;‘)</span></a></li></ol></li></ol>
      </div>
    
  </span>
</div>


    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        PHP函数记录
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">Ttoc</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-02-13T13:51:57.927Z" class="dt-published" itemprop="datePublished">2023-02-13</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/daily/">daily</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/PHP/" rel="tag">PHP</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p><code>还是挺重要的</code></p>
<span id="more"></span>

<h1 id="PHP函数记录"><a href="#PHP函数记录" class="headerlink" title="PHP函数记录"></a>PHP函数记录</h1><h2 id="1-php函数md5"><a href="#1-php函数md5" class="headerlink" title="1)php函数md5"></a>1)php函数md5</h2><blockquote>
<p>ps.<br>sha1，由于此函数依赖的算法已不足够复杂,不推荐使用此函数对明文密码加密。目前大多用md5</p>
<p>但是和md5一样，sha1函数无法处理数组，遇到数组会返回NULL</p>
</blockquote>
<p>做题时，了解到了一个新的函数<code>md5</code></p>
<blockquote>
<p>php md5函数介绍为：</p>
<p>md5( string , raw )</p>
<p>string : 规定需要计算的字符串</p>
<p>raw : 规定十六进制或二进制输出格式。</p>
<p>​        true：16字符二进制格式</p>
<p>​        false(默认): 32字符十六进制数</p>
</blockquote>
<p>比较常用的</p>
<p>数字型：<code>129581926211651571912466741651878684928</code></p>
<p><a data-fancybox="gallery" data-src="/php-functions/image-20220811135742130.png"><img src="/php-functions/image-20220811135742130.png" alt="image-20220811135742130"></a></p>
<p>字符型：<code>ffifdyop</code></p>
<p><a data-fancybox="gallery" data-src="/php-functions/image-20220811135813137.png"><img src="/php-functions/image-20220811135813137.png" alt="image-20220811135813137"></a></p>
<p>发现都有’<code>or</code>‘的形式，可以构造必真的结果</p>
<blockquote>
<p>MD5函数有一个漏洞，当输入的为数组时，会返回为NULL</p>
<p>所以当遇到md5(p1)&#x3D;&#x3D;&#x3D;md5(p2)，把p1和p2进行强比较时，又要求p1和p2不相等</p>
<p>由于两个不同的字符MD5值很难一致，于是输入p1[]和p2[]两个名字一致的字符，随便赋值，<br>p1[]&#x3D;1&amp;p2[]&#x3D;2<br>返回为空，使得强比较成立</p>
<hr>
<p>为什么会这样呢<br>我想起之前的遇到一个题，也有数组，问了一下大佬</p>
<p>大佬说，因为没有对数组中的元素数量声明，函数不知道数组元素第几个的值是1（或2）<br>导致函数到处扫，最后返回NULL【因为这个元素位置我们根本就没定】</p>
<p>下面举几个例子，以我个人理解<br>如果是<br>p1[0]&#x3D;1&amp;p2[0]&#x3D;2<br>是可以的，因为只定义了0号位的数据，而且不相等，其他位置数据没定义，所以比较也不可能出现相等</p>
<p>p1[0]&#x3D;1&amp;p2[1]&#x3D;1<br>是可以的，因为这里p1[]定义了0号位为1，而p2定义的是1号位为1，比较是按顺序比较的，两个数值虽然一样，但是位置不一样，所以比较还是不相等</p>
</blockquote>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">下列的字符串的MD5值都是<span class="number">0</span>e开头的：</span><br><span class="line"></span><br><span class="line"> QNKCDZO</span><br><span class="line"> <span class="number">240610708</span></span><br><span class="line"> s878926199a</span><br><span class="line"> s155964671a</span><br><span class="line"> s214587387a</span><br><span class="line"> s1091221200a</span><br></pre></td></tr></table></figure>

<h2 id="2-php函数ereg，null截断"><a href="#2-php函数ereg，null截断" class="headerlink" title="2)php函数ereg，null截断"></a>2)php函数ereg，null截断</h2><p><strong>此函数在 PHP 5.3.0中已弃用，并在PHP 7.0.0中删除。</strong></p>
<p><strong>[所以遇到无法执行时，可能是出题人没有注意部署题目环境]</strong></p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ereg()函数用指定的模式搜索一个字符串中指定的字符串<span class="punctuation">,</span>如果匹配成功返回<span class="keyword">true</span><span class="punctuation">,</span>否则<span class="punctuation">,</span>则返回<span class="keyword">false</span>。搜索字母的字符是大小写敏感的。 </span><br><span class="line"></span><br><span class="line">ereg函数存在NULL截断漏洞，导致了正则过滤被绕过<span class="punctuation">,</span>所以可以使用<span class="variable">%00</span>截断正则匹配</span><br><span class="line"></span><br><span class="line">比如</span><br><span class="line">ereg (<span class="string">&quot;^[a-zA-Z]+$&quot;</span><span class="punctuation">,</span> $_GET[&#x27;<span class="keyword">c</span>&#x27;])</span><br><span class="line"></span><br><span class="line">当<span class="keyword">c</span><span class="operator">=</span>a<span class="variable">%00123</span>时</span><br><span class="line">ereg只会检测到第一个a为止，后面的数据都被<span class="variable">%00</span>截断了，从而绕过匹配</span><br></pre></td></tr></table></figure>

<p>所以现在一般不再使用<code>ereg</code>，只是做为<code>preg_match</code>替代函数使用</p>
<h2 id="3-php函数sleep"><a href="#3-php函数sleep" class="headerlink" title="3)php函数sleep"></a>3)php函数sleep</h2><blockquote>
<p>当遇到这种需要我们输入参数，但是让参数值必须很大，</p>
<p>而且最后又以这个参数执行sleep函数，就会让我们等很久</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">sleep</span><span class="params">((int)</span></span><span class="variable">$time</span>)</span><br></pre></td></tr></table></figure>

<p><code>sleep()</code>要延缓其程序执行的时间。</p>
<p>但是我们又不能等太久，可以构造php中的科学计数法绕过，就构造一个  </p>
<blockquote>
<p><code>time=0.3e7 （等价于0.3乘10的7次方）</code> </p>
</blockquote>
<p>这样它的值达到了判断的标准。</p>
<p>而且当它<strong>强制转化为整数型</strong>(<code>int</code>)的时候就会因为开头为<code>0.3</code>是<strong>小数变成零</strong>，这样可以满足条件。</p>
<h2 id="4-php函数is-numeric"><a href="#4-php函数is-numeric" class="headerlink" title="4)php函数is_numeric()"></a>4)php函数is_numeric()</h2><p>当遇到类似</p>
<blockquote>
<p><code>0e..;1e;..2e..;...</code></p>
</blockquote>
<p>函数会把其当作科学计数法</p>
<p>这样当遇到</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$num</span> == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">if</span>(<span class="variable">$num</span>)&#123;</span><br><span class="line">            <span class="built_in">if</span>(!<span class="built_in">is_numeric</span>(<span class="variable">$time</span>))</span><br></pre></td></tr></table></figure>

<p>这种</p>
<blockquote>
<p>第一个要弱类型为<code>0</code></p>
<p>第二个要不为<code>0</code>才能执行真的判断</p>
<p>第三个要求其为数字</p>
</blockquote>
<p>就可以用类似<code>0e2</code>，绕过这三个</p>
<h2 id="5-eval-函数和system-函数的比较"><a href="#5-eval-函数和system-函数的比较" class="headerlink" title="5)eval()函数和system()函数的比较"></a>5)eval()函数和system()函数的比较</h2><p><code>记录一次在打靶机时，因为平常习惯用 eval()函数，但是靶机执行nc等命令时，eval()函数没有反应，就是因为其是代码执行，而非命令执行，所以把两者本质的用法搞懂还是很必要的</code></p>
<blockquote>
<p>eval类型函数是代码执行而不是命令执行（一句话木马）</p>
<p>system类型函数是命令执行而不是代码执行</p>
<p>eval函数里必须是一个符合php语法的语句，如果语句结尾没有分号会报错：eval()’d code</p>
</blockquote>
<h2 id="6-PHPのmb系列函数返回值"><a href="#6-PHPのmb系列函数返回值" class="headerlink" title="6)PHPのmb系列函数返回值"></a>6)PHPのmb系列函数返回值</h2><blockquote>
<p><code>https://github.com/php/php-src/issues/9008</code></p>
<p>它会导致奇怪的结果。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;PHP&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">mb_detect_order</span>([<span class="string">&quot;ASCII&quot;</span>,<span class="string">&quot;UTF-8&quot;</span>,<span class="string">&quot;BASE64&quot;</span>]);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(</span><br><span class="line"><span class="title function_ invoke__">mb_detect_encoding</span>(<span class="variable">$string</span>, <span class="literal">null</span>, <span class="literal">true</span>),</span><br><span class="line"><span class="title function_ invoke__">mb_detect_encoding</span>(<span class="variable">$string</span>, <span class="title function_ invoke__">mb_detect_order</span>(), <span class="literal">true</span>),</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">mb_convert_encoding</span>(<span class="variable">$string</span>, <span class="string">&quot;UTF-8&quot;</span>, <span class="string">&quot;BASE64&quot;</span>),</span><br><span class="line"><span class="title function_ invoke__">mb_strtolower</span>(<span class="variable">$string</span>, <span class="string">&quot;BASE64&quot;</span>),</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>得到的结果发现</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Output for <span class="number">8.2</span><span class="number">.0</span></span><br><span class="line">string(<span class="number">5</span>) <span class="string">&quot;ASCII&quot;</span></span><br><span class="line">string(<span class="number">5</span>) <span class="string">&quot;ASCII&quot;</span></span><br><span class="line">string(<span class="number">2</span>) <span class="string">&quot;&lt;s&quot;</span></span><br><span class="line">string(<span class="number">4</span>) <span class="string">&quot;PHM=&quot;</span></span><br><span class="line"></span><br><span class="line">Output for <span class="number">8.0</span><span class="number">.1</span> - <span class="number">8.0</span><span class="number">.26</span><span class="punctuation">,</span> <span class="number">8.1</span><span class="number">.10</span> - <span class="number">8.1</span><span class="number">.13</span></span><br><span class="line">string(<span class="number">5</span>) <span class="string">&quot;ASCII&quot;</span></span><br><span class="line">string(<span class="number">5</span>) <span class="string">&quot;ASCII&quot;</span></span><br><span class="line">string(<span class="number">2</span>) <span class="string">&quot;&lt;s&quot;</span></span><br><span class="line">string(<span class="number">4</span>) <span class="string">&quot;PHM=&quot;</span></span><br><span class="line"></span><br><span class="line">Output for <span class="number">8.1</span><span class="number">.0</span> - <span class="number">8.1</span><span class="number">.9</span></span><br><span class="line">string(<span class="number">6</span>) <span class="string">&quot;BASE64&quot;</span></span><br><span class="line">string(<span class="number">5</span>) <span class="string">&quot;ASCII&quot;</span></span><br><span class="line">string(<span class="number">2</span>) <span class="string">&quot;&lt;s&quot;</span></span><br><span class="line">string(<span class="number">4</span>) <span class="string">&quot;PHM=&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>mb_detect_encoding($string, null, true)</code>返回值</p>
<p>只有在<code>PHP</code>版本在<code>8.1.0 - 8.1.9</code>时会返回<code>base64</code>，而在其他版本都是默认识别为<code>ASCII</code></p>
</blockquote>
<blockquote>
<p><code>mb_detect_encoding()</code>这类的函数对内容进行编码的识别，就是<code>匹配内容中的一些符合编码的字符，匹配成功对应编码加分</code>，最后从头到尾匹配完成后，<code>打分最高的编码就被认为是该内容的编码</code></p>
</blockquote>
<h2 id="7-preg-match-‘-‘"><a href="#7-preg-match-‘-‘" class="headerlink" title="7)preg_match(‘&#x2F;^$&#x2F;‘)"></a>7)preg_match(‘&#x2F;^$&#x2F;‘)</h2><p>可以用<code>%0a</code>绕过，</p>
<p>比如，</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^123$/&#x27;</span>,<span class="variable">$a</span>)</span><br></pre></td></tr></table></figure>

<p>一般情况只有<code>$a</code>为<code>123</code>时才可以通过，但是用换行符号<code>%0a</code></p>
<p>就可以绕过</p>
<p><a data-fancybox="gallery" data-src="/php-functions/image-20230908170938509.png"><img src="/php-functions/image-20230908170938509.png" alt="image-20230908170938509"></a></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">首页</a></li>
        
          <li><a href="/archives/">文章</a></li>
        
          <li><a href="/categories/">分类</a></li>
        
          <li><a href="/tags/">标签</a></li>
        
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PHP%E5%87%BD%E6%95%B0%E8%AE%B0%E5%BD%95"><span class="toc-number">1.</span> <span class="toc-text">PHP函数记录</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-php%E5%87%BD%E6%95%B0md5"><span class="toc-number">1.1.</span> <span class="toc-text">1)php函数md5</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-php%E5%87%BD%E6%95%B0ereg%EF%BC%8Cnull%E6%88%AA%E6%96%AD"><span class="toc-number">1.2.</span> <span class="toc-text">2)php函数ereg，null截断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-php%E5%87%BD%E6%95%B0sleep"><span class="toc-number">1.3.</span> <span class="toc-text">3)php函数sleep</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-php%E5%87%BD%E6%95%B0is-numeric"><span class="toc-number">1.4.</span> <span class="toc-text">4)php函数is_numeric()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-eval-%E5%87%BD%E6%95%B0%E5%92%8Csystem-%E5%87%BD%E6%95%B0%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">1.5.</span> <span class="toc-text">5)eval()函数和system()函数的比较</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-PHP%E3%81%AEmb%E7%B3%BB%E5%88%97%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">1.6.</span> <span class="toc-text">6)PHPのmb系列函数返回值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-preg-match-%E2%80%98-%E2%80%98"><span class="toc-number">1.7.</span> <span class="toc-text">7)preg_match(‘&#x2F;^$&#x2F;‘)</span></a></li></ol></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://ttoc.fun/php-functions/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://ttoc.fun/php-functions/&text=PHP函数记录"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://ttoc.fun/php-functions/&title=PHP函数记录"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://ttoc.fun/php-functions/&is_video=false&description=PHP函数记录"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=PHP函数记录&body=Check out this article: https://ttoc.fun/php-functions/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://ttoc.fun/php-functions/&title=PHP函数记录"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://ttoc.fun/php-functions/&title=PHP函数记录"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://ttoc.fun/php-functions/&title=PHP函数记录"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://ttoc.fun/php-functions/&title=PHP函数记录"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://ttoc.fun/php-functions/&name=PHP函数记录&description=&lt;p&gt;&lt;code&gt;还是挺重要的&lt;/code&gt;&lt;/p&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://ttoc.fun/php-functions/&t=PHP函数记录"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2022-2024
    Ttoc
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/archives/">文章</a></li><!--
     --><!--
       --><li><a href="/categories/">分类</a></li><!--
     --><!--
       --><li><a href="/tags/">标签</a></li><!--
     --><!--
       --><li><a href="/search/">搜索</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板！\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功！");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->


<!-- FancyBox -->

  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>
  

<script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>